# Next.js + Python æ··åˆæ¶æ„é‡æ„æ–¹æ¡ˆ

## ğŸ¯ é‡æ„ç›®æ ‡

å°†ç°æœ‰çš„ Batch MCP æµ‹è¯•æ¡†æ¶ä» CLI å·¥å…·é‡æ„ä¸º Web åº”ç”¨ï¼Œéƒ¨ç½²åˆ° Vercel å¹³å°ã€‚

### æ ¸å¿ƒèƒ½åŠ›ä¿æŒ
- âœ… MCP å·¥å…·åŠ¨æ€éƒ¨ç½²å’Œæµ‹è¯•
- âœ… GitHub URL â†’ npm åŒ…åæ˜ å°„  
- âœ… è·¨å¹³å° MCP æœåŠ¡å™¨é€šä¿¡
- âœ… JSON/HTML æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
- âœ… AgentScope æ™ºèƒ½ä»£ç†é›†æˆ

### æ–°å¢èƒ½åŠ›
- ğŸŒ ç°ä»£åŒ– Web ç•Œé¢
- âš¡ å®æ—¶æµ‹è¯•è¿›åº¦æ˜¾ç¤º
- ğŸ“Š å¯è§†åŒ–æµ‹è¯•ç»“æœ
- ğŸ”„ å¼‚æ­¥ä»»åŠ¡å¤„ç†
- ğŸ“± å“åº”å¼è®¾è®¡

---

## ğŸ“ é‡æ„åç›®å½•ç»“æ„

```
batch_mcp/
â”œâ”€â”€ ğŸ“ frontend/                    # Next.js å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/                        
â”‚   â”‚   â”œâ”€â”€ page.tsx                # ä¸»æµ‹è¯•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx              # æ ¹å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ globals.css             # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ api/                    # Next.js API Routes (ä»£ç†)
â”‚   â”‚       â””â”€â”€ proxy/[...path].ts  # API ä»£ç†åˆ° Python å‡½æ•°
â”‚   â”œâ”€â”€ components/                 
â”‚   â”‚   â”œâ”€â”€ TestForm.tsx            # URL è¾“å…¥è¡¨å•
â”‚   â”‚   â”œâ”€â”€ TestProgress.tsx        # å®æ—¶è¿›åº¦ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TestResults.tsx         # ç»“æœå±•ç¤ºç»„ä»¶
â”‚   â”‚   â””â”€â”€ ReportViewer.tsx        # æŠ¥å‘ŠæŸ¥çœ‹å™¨
â”‚   â”œâ”€â”€ lib/                        
â”‚   â”‚   â”œâ”€â”€ api.ts                  # API è°ƒç”¨å°è£…
â”‚   â”‚   â”œâ”€â”€ types.ts                # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ utils.ts                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ package.json                
â”‚   â”œâ”€â”€ next.config.js              
â”‚   â””â”€â”€ tailwind.config.js          # Tailwind CSS é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ api/                        # Vercel Python Serverless Functions
â”‚   â”œâ”€â”€ test-mcp.py                # ä¸»æµ‹è¯•ç«¯ç‚¹
â”‚   â”œâ”€â”€ list-tools.py              # å·¥å…·åˆ—è¡¨æŸ¥è¯¢
â”‚   â”œâ”€â”€ test-status.py             # æµ‹è¯•çŠ¶æ€æŸ¥è¯¢
â”‚   â””â”€â”€ requirements.txt           # Python ä¾èµ–
â”‚
â”‚   â”œâ”€â”€ utils/                     
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ csv_parser.py          # ä¿ç•™ç°æœ‰é€»è¾‘
â”‚   â”‚   â””â”€â”€ validators.py          # è¾“å…¥éªŒè¯
â”‚   â””â”€â”€ models/                    
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ test_models.py         # Pydantic æ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ ğŸ“ data/                       # ä¿æŒç°æœ‰æ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ mcp.csv                    
â”‚   â”œâ”€â”€ mcp_cleaned.csv            
â”‚   â””â”€â”€ test_results/              
â”‚
â”œâ”€â”€ ğŸ“ shared/                     # å‰åç«¯å…±äº«ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ types.py                   # Python ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ vercel.json                    # Vercel éƒ¨ç½²é…ç½®
â”œâ”€â”€ requirements.txt               # æ ¹çº§ Python ä¾èµ–
â”œâ”€â”€ package.json                   # æ ¹çº§ Node.js é…ç½®
â””â”€â”€ README.md                      # æ›´æ–°çš„æ–‡æ¡£
```

---

## ğŸŒ å‰ç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Next.js 14+**: App Router, SSR/SSG æ”¯æŒ
- **React 18**: å¹¶å‘ç‰¹æ€§ï¼ŒSuspense
- **TypeScript**: ç±»å‹å®‰å…¨
- **Tailwind CSS**: åŸå­åŒ– CSS æ¡†æ¶

### çŠ¶æ€ç®¡ç†ä¸æ•°æ®è·å–
- **Zustand**: è½»é‡çº§çŠ¶æ€ç®¡ç†
- **TanStack Query (React Query)**: æœåŠ¡å™¨çŠ¶æ€ç®¡ç†
- **WebSocket/SSE**: å®æ—¶é€šä¿¡

### UI ç»„ä»¶åº“
- **Headless UI**: æ— æ ·å¼ç»„ä»¶åŸºç¡€
- **Lucide React**: å›¾æ ‡åº“
- **React Hook Form**: è¡¨å•å¤„ç†

---

## âš¡ åç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Python 3.12**: ç°æœ‰ç‰ˆæœ¬ä¿æŒ
- **Pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **FastAPI/ç®€åŒ–ç‰ˆ**: ç”¨äº Vercel Functions

### ä¿ç•™çš„æ ¸å¿ƒåº“
- **AgentScope**: æ™ºèƒ½ä»£ç†ï¼ˆå¦‚æœå¯ç”¨ï¼‰
- **Rich**: æ—¥å¿—æ ¼å¼åŒ–
- **Pandas**: æ•°æ®å¤„ç†
- **Requests**: HTTP å®¢æˆ·ç«¯

---

## ğŸ”„ é‡æ„å®æ–½è®¡åˆ’

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„æ­å»º (ç¬¬1-2å¤©)
1. âœ… åˆ›å»ºæ–°çš„ç›®å½•ç»“æ„
2. âœ… åˆå§‹åŒ– Next.js é¡¹ç›®
3. âœ… é…ç½® Vercel éƒ¨ç½²ç¯å¢ƒ
4. âœ… åˆ›å»ºåŸºç¡€ Python API å‡½æ•°

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒåŠŸèƒ½è¿ç§» (ç¬¬3-4å¤©)
1. âœ… é‡æ„ MCP éƒ¨ç½²å™¨ä¸º API å‡½æ•°
2. âœ… è¿ç§» CSV è§£æå’Œå·¥å…·æŸ¥æ‰¾é€»è¾‘
3. âœ… åˆ›å»ºæµ‹è¯•æ‰§è¡Œ API ç«¯ç‚¹
4. âœ… å®ç°åŸºç¡€å‰ç«¯è¡¨å•

### é˜¶æ®µä¸‰ï¼šé«˜çº§åŠŸèƒ½å®ç° (ç¬¬5-6å¤©)
1. âœ… å®æ—¶è¿›åº¦æ˜¾ç¤º
2. âœ… æµ‹è¯•ç»“æœå¯è§†åŒ–
3. âœ… æŠ¥å‘Šç”Ÿæˆå’Œå±•ç¤º
4. âœ… é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

### é˜¶æ®µå››ï¼šä¼˜åŒ–å’Œéƒ¨ç½² (ç¬¬7å¤©)
1. âœ… æ€§èƒ½ä¼˜åŒ–
2. âœ… å“åº”å¼è®¾è®¡
3. âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
4. âœ… æ–‡æ¡£æ›´æ–°

---

## ğŸ¨ ç”¨æˆ·ç•Œé¢è®¾è®¡

### ä¸»é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§ª Batch MCP Testing Platform     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ğŸ“ GitHub URL è¾“å…¥æ¡†               â”‚
â”‚  âš™ï¸  æµ‹è¯•é€‰é¡¹ (è¶…æ—¶/æ™ºèƒ½æ¨¡å¼)        â”‚
â”‚  ğŸš€ [å¼€å§‹æµ‹è¯•] æŒ‰é’®                â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š å®æ—¶è¿›åº¦æ˜¾ç¤º                   â”‚
â”‚  â””â”€â”€ è¿›åº¦æ¡ + çŠ¶æ€ä¿¡æ¯              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ æµ‹è¯•ç»“æœå±•ç¤º                   â”‚
â”‚  â”œâ”€â”€ æˆåŠŸç‡ç»Ÿè®¡                    â”‚
â”‚  â”œâ”€â”€ æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨                  â”‚
â”‚  â””â”€â”€ ğŸ“„ [æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š] é“¾æ¥         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®äº¤äº’æµç¨‹
1. **è¾“å…¥é˜¶æ®µ**: URL éªŒè¯ â†’ å·¥å…·ä¿¡æ¯é¢„è§ˆ
2. **æµ‹è¯•é˜¶æ®µ**: å®æ—¶è¿›åº¦ â†’ çŠ¶æ€æ›´æ–°
3. **ç»“æœé˜¶æ®µ**: å¯è§†åŒ–å±•ç¤º â†’ æŠ¥å‘Šä¸‹è½½

---

## ğŸš€ API è®¾è®¡è§„èŒƒ

### ç»Ÿä¸€å“åº”æ ¼å¼
```typescript
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
    details?: any;
  };
  timestamp: string;
}
```

### æ ¸å¿ƒç«¯ç‚¹

#### 1. æµ‹è¯• MCP å·¥å…·
```
POST /api/test-mcp
Content-Type: application/json

{
  "url": "https://github.com/upstash/context7",
  "timeout": 600,
  "smart": true,
  "verbose": false
}

Response:
{
  "success": true,
  "data": {
    "task_id": "test_20250815_143022",
    "status": "running",
    "tool_info": {
      "name": "Context7",
      "author": "upstash",
      "package_name": "github:upstash/context7"
    }
  }
}
```

#### 2. æŸ¥è¯¢æµ‹è¯•çŠ¶æ€
```
GET /api/test-status/{task_id}

Response:
{
  "success": true,
  "data": {
    "status": "completed",
    "progress": 100,
    "current_step": "ç”ŸæˆæŠ¥å‘Š",
    "results": {...},
    "reports": {
      "html": "/reports/test_20250815_143022.html",
      "json": "/reports/test_20250815_143022.json"
    }
  }
}
```

#### 3. å·¥å…·æœç´¢
```
GET /api/list-tools?search=context&limit=10

Response:
{
  "success": true,
  "data": {
    "tools": [...],
    "total": 25,
    "page": 1
  }
}
```

---

## ğŸ“¦ Vercel éƒ¨ç½²é…ç½®

### vercel.json å®Œæ•´é…ç½®
```json
{
  "version": 2,
  "builds": [
    {
      "src": "frontend/package.json",
      "use": "@vercel/next",
      "config": {
        "outputDirectory": "frontend/.next"
      }
    },
    {
      "src": "api/*.py",
      "use": "@vercel/python",
      "config": {
        "maxLambdaSize": "50mb"
      }
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/api/$1"
    },
    {
      "src": "/(.*)",
      "dest": "/frontend/$1"
    }
  ],
  "env": {
    "OPENAI_API_KEY": "@openai_api_key",
    "OPENAI_BASE_URL": "@openai_base_url", 
    "OPENAI_MODEL": "@openai_model",
    "DASHSCOPE_API_KEY": "@dashscope_api_key",
    "DASHSCOPE_BASE_URL": "@dashscope_base_url",
    "DASHSCOPE_MODEL": "@dashscope_model"
  },
  "functions": {
    "api/test-mcp.py": {
      "maxDuration": 300
    },
    "api/*.py": {
      "maxDuration": 60
    }
  }
}
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# AI æœåŠ¡é…ç½®
OPENAI_API_KEY=sk-xxx
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4

# é€šä¹‰åƒé—®é…ç½®  
DASHSCOPE_API_KEY=sk-xxx
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
DASHSCOPE_MODEL=qwen-plus
```

---

## ğŸ”§ æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. Serverless å‡½æ•°é™åˆ¶
**æŒ‘æˆ˜**: 5åˆ†é’Ÿæ‰§è¡Œæ—¶é—´é™åˆ¶ï¼Œå†…å­˜é™åˆ¶
**è§£å†³æ–¹æ¡ˆ**: 
- å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼ˆVercel KV + è½®è¯¢ï¼‰
- æµå¼å“åº”å¤„ç†
- åˆ†æ­¥éª¤æ‰§è¡Œå’ŒçŠ¶æ€ä¿å­˜

### 2. MCP å·¥å…·éƒ¨ç½²
**æŒ‘æˆ˜**: npx å‘½ä»¤åœ¨ Serverless ç¯å¢ƒæ‰§è¡Œ
**è§£å†³æ–¹æ¡ˆ**:
- é¢„ç¼–è¯‘å¸¸ç”¨å·¥å…·
- å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆå¿…è¦æ—¶ï¼‰
- æœ¬åœ°ç¼“å­˜ç­–ç•¥

### 3. å®æ—¶è¿›åº¦æ›´æ–°
**æŒ‘æˆ˜**: Serverless å‡½æ•°æ— æ³•ç»´æŒé•¿è¿æ¥
**è§£å†³æ–¹æ¡ˆ**:
- é•¿è½®è¯¢ + çŠ¶æ€å­˜å‚¨
- Server-Sent Events (SSE)
- WebSocket (é€šè¿‡ç¬¬ä¸‰æ–¹æœåŠ¡)

### 4. æ•°æ®æŒä¹…åŒ–
**æŒ‘æˆ˜**: æµ‹è¯•ç»“æœå’ŒæŠ¥å‘Šå­˜å‚¨
**è§£å†³æ–¹æ¡ˆ**:
- Vercel Blob Storage
- ä¸´æ—¶æ–‡ä»¶æ¸…ç†ç­–ç•¥
- CDN åŠ é€Ÿè®¿é—®

---

## ğŸ“‹ è¿ç§»æ£€æŸ¥æ¸…å•

### æ ¸å¿ƒåŠŸèƒ½ä¿æŒ
- [ ] MCP å·¥å…· URL è§£æå’Œæ˜ å°„
- [ ] è·¨å¹³å° npx éƒ¨ç½²èƒ½åŠ›
- [ ] MCP åè®®é€šä¿¡å®ç°
- [ ] JSON/HTML æŠ¥å‘Šç”Ÿæˆ
- [ ] AgentScope æ™ºèƒ½ä»£ç†é›†æˆ

### æ–°å¢åŠŸèƒ½å®ç°  
- [ ] ç°ä»£åŒ– Web ç•Œé¢
- [ ] å®æ—¶æµ‹è¯•è¿›åº¦æ˜¾ç¤º
- [ ] å¯è§†åŒ–æµ‹è¯•ç»“æœ
- [ ] å¼‚æ­¥ä»»åŠ¡å¤„ç†
- [ ] å“åº”å¼ç§»åŠ¨ç«¯é€‚é…

### éƒ¨ç½²å’Œè¿ç»´
- [ ] Vercel è‡ªåŠ¨éƒ¨ç½²é…ç½®
- [ ] ç¯å¢ƒå˜é‡å®‰å…¨ç®¡ç†
- [ ] é”™è¯¯ç›‘æ§å’Œæ—¥å¿—
- [ ] æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

### åŠŸèƒ½æŒ‡æ ‡
- âœ… 100% ä¿æŒç°æœ‰æ ¸å¿ƒåŠŸèƒ½
- ğŸ¯ < 3 ç§’é¡µé¢åŠ è½½æ—¶é—´
- ğŸ¯ 95%+ API å¯ç”¨æ€§
- ğŸ¯ æ”¯æŒå¹¶å‘æµ‹è¯•

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- ğŸ¯ ç›´è§‚çš„æµ‹è¯•æµç¨‹
- ğŸ¯ å®æ—¶è¿›åº¦åé¦ˆ
- ğŸ¯ æ¸…æ™°çš„ç»“æœå±•ç¤º
- ğŸ¯ ç§»åŠ¨ç«¯å‹å¥½ç•Œé¢

### æŠ€æœ¯æŒ‡æ ‡
- ğŸ¯ < 100ms API å“åº”æ—¶é—´
- ğŸ¯ < 300 ç§’æµ‹è¯•å®Œæˆæ—¶é—´
- ğŸ¯ é›¶åœæœºéƒ¨ç½²
- ğŸ¯ è‡ªåŠ¨é”™è¯¯æ¢å¤

---

è¿™ä¸ªé‡æ„æ–¹æ¡ˆå°†åœ¨ä¿æŒç°æœ‰æ ¸å¿ƒåŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œæä¾›ç°ä»£åŒ–çš„ Web ç”¨æˆ·ä½“éªŒï¼Œå¹¶å……åˆ†åˆ©ç”¨ Vercel å¹³å°çš„ä¼˜åŠ¿è¿›è¡Œæ— ç¼éƒ¨ç½²ã€‚
